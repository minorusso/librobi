<div class="row justify-content-center">
    <h1 class="font-weight-normal mt-5 mb-5">レビュー詳細</h1>
</div>
<div class="row justify-content-center">
    <div class="content">
        <div class="card-wrap">
            <div class="card-list">
                <p class="book-image"><%= link_to (image_tag(@book.image_url)), @book.url %></p>
                <p class="book-titler">タイトル：<%= @book.title %></p>
                <p class="book-author">著者/編集：<%= @book.author %></p>
                <p class="book-itemCaption">内容紹介：<%= @book.item_caption %></p>
            </div>
        </div>
    </div>
</div>
<div class="row justify-content-center">
    <div class="card-wrap">
        <div class="card-list">
            <div id="star-rate-<%= @post.id %>"></div>     
            <!-- 評価javascript -->
            <script>
            $('#star-rate-<%= @post.id %>').raty({
                size: 36,
                starOff:  '<%= asset_path('star-off.png') %>',
                starOn : '<%= asset_path('star-on.png') %>',
                starHalf: '<%= asset_path('star-half.png') %>',
                half: true,
                readOnly: true,
                score: <%= @post.rate %>,
            });
            </script>  
                <p><%= @post.review %></p>
            <div id="favorite_btn_<%= @post.id %>">
                <%= render 'favorites/favorite', post: @post %>
            </div>
            <% if @post.user == current_user %>
                <%= link_to "編集", edit_post_path(id: @post.id, book_id: @post.book.id), class: "btn btn-info mr-3" %>
                <%= link_to '削除する', post_path(id: @post.id, book_id: @post.book.id),method: :delete, "data-confirm"=>"本当に消しますか？", class: "btn btn-danger mr-3" %>
            <% end %>
            <%= link_to "タイムラインに戻る", posts_path, class: "btn btn-dark" %>
        </div>
        <div class="comment-card">
            <h3>コメント一覧</h3>
            <!-- このcomments_areaというHTMLのidを取得して、そのdivの部分だけを更新する -->
            <div id="comments_area">
            <!-- 投稿されたコメント一覧をブログの詳細ページに表示するためのrender -->
            <%= render partial: 'comments/index', locals: { comments: @comments, post: @post } %>
            </div>
            <!-- コメント入力欄をブログの詳細ページに表示するためのrender -->
            <%= render partial: 'comments/form', locals: { comment: @comment, post: @post } %>
        </div>
    </div>    
</div>



